{"ast":null,"code":"const apiKey = process.env.REACT_APP_SETLISTFM_API_KEY;\nexport async function fetchSetlists(artist, year) {\n  var _data$setlist;\n  const url = `https://api.setlist.fm/rest/1.0/search/setlists?artistName=${encodeURIComponent(artist)}&year=${year}`;\n  const response = await fetch(url, {\n    headers: {\n      \"x-api-key\": apiKey,\n      Accept: \"application/json\"\n    }\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to fetch from Setlist.fm\");\n  }\n  const data = await response.json();\n  return ((_data$setlist = data.setlist) === null || _data$setlist === void 0 ? void 0 : _data$setlist.map(item => {\n    var _item$artist, _item$venue, _item$venue2, _item$venue2$city, _item$venue3, _item$venue3$city, _item$venue3$city$cou, _item$tour, _item$artist2;\n    let setlist = [];\n    try {\n      var _item$sets, _item$sets$set, _item$sets$set$;\n      setlist = Array.isArray((_item$sets = item.sets) === null || _item$sets === void 0 ? void 0 : (_item$sets$set = _item$sets.set) === null || _item$sets$set === void 0 ? void 0 : (_item$sets$set$ = _item$sets$set[0]) === null || _item$sets$set$ === void 0 ? void 0 : _item$sets$set$.song) ? item.sets.set[0].song.map(song => song.name) : [];\n    } catch {\n      setlist = [];\n    }\n    return {\n      artist: ((_item$artist = item.artist) === null || _item$artist === void 0 ? void 0 : _item$artist.name) || artist,\n      date: item.eventDate || \"\",\n      venue: ((_item$venue = item.venue) === null || _item$venue === void 0 ? void 0 : _item$venue.name) || \"\",\n      location: `${((_item$venue2 = item.venue) === null || _item$venue2 === void 0 ? void 0 : (_item$venue2$city = _item$venue2.city) === null || _item$venue2$city === void 0 ? void 0 : _item$venue2$city.name) || \"\"}, ${((_item$venue3 = item.venue) === null || _item$venue3 === void 0 ? void 0 : (_item$venue3$city = _item$venue3.city) === null || _item$venue3$city === void 0 ? void 0 : (_item$venue3$city$cou = _item$venue3$city.country) === null || _item$venue3$city$cou === void 0 ? void 0 : _item$venue3$city$cou.code) || \"\"}`,\n      tour: ((_item$tour = item.tour) === null || _item$tour === void 0 ? void 0 : _item$tour.name) || \"\",\n      setlist,\n      sourceUrl: `https://www.setlist.fm/setlist/${(_item$artist2 = item.artist) === null || _item$artist2 === void 0 ? void 0 : _item$artist2.name}/${item.id}`,\n      type: \"concert\",\n      status: \"visited\"\n    };\n  })) || [];\n}","map":{"version":3,"names":["apiKey","process","env","REACT_APP_SETLISTFM_API_KEY","fetchSetlists","artist","year","_data$setlist","url","encodeURIComponent","response","fetch","headers","Accept","ok","Error","data","json","setlist","map","item","_item$artist","_item$venue","_item$venue2","_item$venue2$city","_item$venue3","_item$venue3$city","_item$venue3$city$cou","_item$tour","_item$artist2","_item$sets","_item$sets$set","_item$sets$set$","Array","isArray","sets","set","song","name","date","eventDate","venue","location","city","country","code","tour","sourceUrl","id","type","status"],"sources":["/Users/jfulbright/bootcamp/Projects/LifeLog/client/src/features/concerts/api/concertApi.js"],"sourcesContent":["const apiKey = process.env.REACT_APP_SETLISTFM_API_KEY;\n\nexport async function fetchSetlists(artist, year) {\n  const url = `https://api.setlist.fm/rest/1.0/search/setlists?artistName=${encodeURIComponent(\n    artist\n  )}&year=${year}`;\n\n  const response = await fetch(url, {\n    headers: {\n      \"x-api-key\": apiKey,\n      Accept: \"application/json\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(\"Failed to fetch from Setlist.fm\");\n  }\n\n  const data = await response.json();\n\n  return (\n    data.setlist?.map((item) => {\n      let setlist = [];\n      try {\n        setlist = Array.isArray(item.sets?.set?.[0]?.song)\n          ? item.sets.set[0].song.map((song) => song.name)\n          : [];\n      } catch {\n        setlist = [];\n      }\n\n      return {\n        artist: item.artist?.name || artist,\n        date: item.eventDate || \"\",\n        venue: item.venue?.name || \"\",\n        location: `${item.venue?.city?.name || \"\"}, ${\n          item.venue?.city?.country?.code || \"\"\n        }`,\n        tour: item.tour?.name || \"\",\n        setlist,\n        sourceUrl: `https://www.setlist.fm/setlist/${item.artist?.name}/${item.id}`,\n        type: \"concert\",\n        status: \"visited\",\n      };\n    }) || []\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}